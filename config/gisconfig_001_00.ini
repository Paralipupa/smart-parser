;данные по приборам учета
[check]
; Поиск ключевого значения для определения совместимости входных данных и конфигурации
row=0,1
column=0,1
pattern=Здание

[main]
path=output
row_start=0
page_name=
page_index=0
max_columns=20
max_rows_heading=5

[headers_0]
name=period
row=5,6,7
column=9
pattern=[0-9]{2}\.[0-9]{2}\.[0-9]{4}

[headers_1]
name=address
row=3
column=0
pattern=.*(?:ул|д\.|кв\.|г\.|г,|бул|пер).*

[col_0]
pattern=Здание
condition_begin_team=Кв.\s*[0-9]{1,3},\s*л/с(.)+
row_offset=0
col_offset=0
pattern_offset=
is_include_offset=0

[col_1]
pattern=Характеристики
row_offset=0
col_offset=0
pattern_offset=
is_include_offset=0

[col_2]
pattern=Модель
row_offset=0
col_offset=0
pattern_offset=
is_include_offset=0

[col_3]
pattern=Идентификатор
row_offset=0
col_offset=0
pattern_offset=
is_include_offset=0

[col_4]
pattern=Заводской номер
row_offset=0
col_offset=0
pattern_offset=
is_include_offset=0

[col_5]
pattern=Дата поверки
row_offset=0
col_offset=0
pattern_offset=
is_include_offset=0

[col_6]
pattern=Номер пломбы
row_offset=0
col_offset=0
pattern_offset=
is_include_offset=0

[col_7]
pattern=Дата показания
row_offset=0
col_offset=0
pattern_offset=
is_include_offset=0

[col_8]
pattern=(?:Дневн).*(?:показ)
row_offset=0
col_offset=0
pattern_offset=
is_include_offset=0
group=Дневное

[col_9]
pattern=(?:Ноч).*(?:показ)
row_offset=0
col_offset=0
pattern_offset=
is_include_offset=0
group=Ночное

[col_10]
pattern=(?:Пик).*(?:показ)
row_offset=0
col_offset=0
pattern_offset=
is_include_offset=0
group=Пиковое


[doc_2]
; ЛС 
name=accounts

[accounts_0]
; ИНН, ОГРН или OrgID
name=org_ppa_guid
pattern=.+
col_config=0
row_data=0
func=inn

[accounts_1]
; Внутренний идентификатор договора
name=contract_internal_id
pattern=@2
col_config=0
row_data=0
func=id

[accounts_2]
; Внутренний идентификатор ЛС
name=internal_id 
pattern=(?<=№)\s*.+
col_config=0
row_data=0
func=id

[accounts_3]
; Идентификатор дома
; GUID
name=fias
pattern=@0
col_config=0
row_data=0
func=address
func_pattern=(?:(?!,).)+№.+$

[accounts_4]
; Адрес дома
name=address
pattern=(.)+
col_config=0
row_data=0
func=address

[accounts_5]
; Номер помещения (если есть)
name=room_number
pattern=
col_config=0
row_data=0

[accounts_6]
; ГИС. Идентификатор квартиры
; GUID
name=gis_premises_id
pattern=^Кв\.\s*[0-9]+
col_config=0
row_data=0

[accounts_7]
; ГИС. Идентификатор блока
; GUID
name=gis_block_id
pattern=
col_config=0
row_data=0

[accounts_8]
; ГИС. Идентификатор комнаты
; GUID
name=gis_room_id
pattern=
col_config=0
row_data=0

[accounts_9]
; ГИС. Идентификатор ЛС
; GUID
name=gis_account_id
pattern=@2
col_config=0
row_data=0
func=id

[accounts_10]
; Номер ЛС
name=account_number
pattern=@2
col_config=0
row_data=0

[accounts_11]
; ГИС. Идентификатор ЛС
name=gis_account_service_id
pattern=@2
col_config=0
row_data=0
func=id

[accounts_12]
; ГИС. Номер ЛИ
name=gis_account_unified_number
pattern=@2
col_config=0
row_data=0
func=

[accounts_13]
; Общая площадь помещения
name=total_square
pattern=
col_config=0
row_data=0

[accounts_14]
; Жилая площадь
name=residential_square
pattern=
col_config=0
row_data=0

[accounts_15]
; Кол-во проживающих
name=living_person_number
pattern=
col_config=0
row_data=0

[accounts_16]
; Часовой пояс. Кол-во часов + или - от UTC
name=timezone
pattern=
col_config=0
row_data=0

[accounts_17]
; Альтернативный идентификатор ЛС, используется в некоторых конфигурациях. 
; Если  internal_id, по каким-то причинам не получается использовать. 
name=account_identifier
pattern=
col_config=0
row_data=0

[accounts_18]
; Признак нежилого помещения
name=not_residential
pattern=
col_config=0
row_data=0
func=

[doc_1]
; Приборы учета (ПУ) 
name=pu
rows_exclude=0

[pu_0]
; ИНН, ОГРН или OrgID
name=org_ppa_guid
pattern=.+
col_config=0
row_data=0
func=inn

[pu_1]
; Внутренний идентификатор ПУ
name=internal_id
pattern=(?<=№).+
; pattern=(?<=л\/с №)[0-9]{4,8}\s?((?:\([0-9]{1,2}\))|(?:-[0-9]{1,2})|(?:\([а-я]{1}\))(?:-[0-9]{1,2}))
col_config=0
row_data=
func=id

[pu_2]
; Внутренний идентификатор ЛС
name=account_internal_id
pattern=(?<=№)[0-9]{4}
col_config=0
row_data=
func=id

[pu_3]
; ГИС. Идентификатор ПУ GUID
name=gis_id
pattern=@1
col_config=0
col_config_offset=3
pattern_offset=.+
row_data=
func=id,id,guid

[pu_4]
; Серийный номер
name=serial_number
pattern=@1
col_config=0
col_config_offset=4
pattern_offset=.+
row_data=

[pu_5]
; Тип устройства
name=device_type
pattern=^(?!Кв).+(?=,\s*л\/с №)
col_config=0
row_data=

[pu_6]
; Производитель
name=manufacturer
pattern=
col_config=
row_data=

[pu_7]
; Модель
name=model
pattern=@1
col_config=0
col_config_offset=2
pattern_offset=.+
row_data=

[pu_8]
; Показания момент установки. Тариф 1
name=rr1
pattern=
col_config=
row_data=

[pu_9]
; Показания момент установки. Тариф 2
name=rr2
pattern=
col_config=
row_data=

[pu_10]
; Показания момент установки. Тариф 3
name=rr3
pattern=
col_config=
row_data=

[pu_11]
; Дата установки
name=installation_date
pattern=
col_config=
row_data=

[pu_12]
; Дата начала работы
name=commissioning_date
pattern=
col_config=
col_config_offset=
row_data=

[pu_13]
; Дата следующей поверки
name=next_verification_date
pattern=@1
col_config=0
col_config_offset=5
pattern_offset=.+

[pu_14]
; Дата последней поверки
name=first_verification_date
pattern=
col_config=0
row_data=0

[pu_15]
; Дата опломбирования
name=factory_seal_date
pattern=
col_config=
row_data=

[pu_16]
; Интервал проверки (кол-во месяцев)
name=checking_interval
pattern=
col_config=0
row_data=0

[pu_17]
; Идентификатор услуги
name=service_internal_id 
pattern=@5
col_config=0
row_data=
func=id

[pu_18]
; Дата завершения действия ПУ
name=stop_date 
pattern=
col_config=
row_data=

[doc_0]
; ПУ показания
name=puv
; rows_exclude=0
required_fields=rr1,rr2,rr3


[puv_0]
; ИНН, ОГРН или OrgID
name=org_ppa_guid
pattern=.+
col_config=0
row_data=
func=inn

[puv_1]
; Внутренний идентификатор ПУП
name=internal_id
; pattern=(?<=л\/с №)[0-9]{4,8}\s?((?:\([0-9]{1,2}\))|(?:-[0-9]{1,2})|(?:\([а-я]{1}\))(?:-[0-9]{1,2}))
pattern=(?<=№).+
col_config=0
row_data=
func=id,id

[puv_2]
; ГИС. Идентификатор ПУП GUID
name=gis_id
pattern=@1
col_config=0
row_data=
func=

[puv_3]
; Внутренний идентификатор ПУ
name=metering_device_internal_id
pattern=(?<=№).+
col_config=0
row_data=
func=id

[puv_4]
; Дата
name=date
pattern=(.)+
col_config=7
row_data=

[puv_5]
; Показание 1
name=rr1
pattern=(.)+
col_config=8
row_data=
type=float

[puv_6]
; Показание 2
name=rr2
pattern=(.)+
col_config=9
row_data=
type=float

[puv_7]
; Показание 3
name=rr3
pattern=(.)+
col_config=10
row_data=
type=float

